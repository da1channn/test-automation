# ユーザーストーリー一覧

以下は本プロジェクトにおけるユーザーストーリーのマスター一覧です。各ストーリーは機能実装のベースとなり、優先度順に整理しています。

| ID     | タイトル             | 説明                                                                                             | 優先度 |
| ------ | ---------------- | ---------------------------------------------------------------------------------------------- | --- |
| US-001 | テスト実行 & レポート収集   | Webアプリケーションに対し、pytest および Playwright を利用して自動テストを実行し、JSON 形式のレポートを生成・収集する。                      | 高   |
| US-002 | テスト失敗検知          | 収集したテストレポートから失敗ケースを抽出し、Failure オブジェクトとして内部へ渡す。                                                 | 高   |
| US-003 | エラークラスタリング       | 複数の失敗ケースを BM25+TF-IDF によるスニペット解析でクラスタリングし、類似する根本原因ごとにグループ化する。                                  | 中   |
| US-004 | AI プロンプト生成       | 各クラスタ化された失敗ケースについて、context\_chunker の出力を元に prompt\_builder が Claude Code API 呼び出し用のプロンプトを生成する。 | 高   |
| US-005 | パッチ生成 & 適用       | Claude Code API から生成された diff／full-patch を受け取り、`git apply` → `black`/`ruff` → テスト再実行 のフローで適用する。 | 高   |
| US-006 | PR 自動生成 & コメント追加 | パッチ適用成功後に Git worktree でブランチを作成し、GitHub の Pull Request を自動生成、コメントで修正理由を記載する。                   | 高   |
| US-007 | 可観測性 & モニタリング    | usage\_tracker が収集したトークン数や成功率を Prometheus にエクスポートし、Grafana ダッシュボードで可視化・アラート設定を行う。              | 中   |
| US-008 | CLI 操作性          | `ai-fix` CLI にてレポートパス指定、モデル選択、dry-run、並列数、デバッグモードなどのオプション操作が行える。                               | 高   |
| US-009 | 設定管理             | `config/default.yml` および環境変数 (`CLAUDE_PROFILE`, `GH_TOKEN` など) によって、ツールの動作を柔軟に制御できる。           | 中   |
| US-010 | コスト管理アラート        | 残りトークン時間が閾値以下になった際に Slack など外部通知チャネルへ自動でアラートを送信する。                                             | 低   |

---

各ストーリーを基に実装タスクを細分化し、スプリントへ落とし込みを行ってください。
